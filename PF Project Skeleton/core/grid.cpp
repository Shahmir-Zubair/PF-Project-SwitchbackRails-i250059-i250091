#include "grid.h"
#include "simulation_state.h"
#include <iostream>

// ============================================================================
// GRID.CPP - Grid utilities
// ============================================================================

// ----------------------------------------------------------------------------
// Check if a position is inside the grid.
// ----------------------------------------------------------------------------
// Returns true if x,y are within bounds.
// ----------------------------------------------------------------------------
bool isInBounds(int r, int c) {
    if((r < ROWS) && (r >= 0) && (c >= 0) && (c < COLS))
        return true;
    else
        return false;

}

// ----------------------------------------------------------------------------
// Check if a tile is a track tile.
// ----------------------------------------------------------------------------
// Returns true if the tile can be traversed by trains.
// ----------------------------------------------------------------------------
bool isTrackTile(int r, int c) {
    char tile = GRID[r][c];
    bool is_track = (tile == '-' || tile == '|' || tile == '/' || tile == '\\' || tile == '+' || tile == '=' || (tile >= 'A' && tile <= 'Z'));
    return is_track;
}

// ----------------------------------------------------------------------------
// Check if a tile is a switch.
// ----------------------------------------------------------------------------
// Returns true if the tile is 'A'..'Z'.
// ----------------------------------------------------------------------------
bool isSwitchTile(int r, int c) {
    char tile = GRID[r][c];
    bool is_switch = (tile >= 'A' && tile <= 'Z');
    return is_switch;
}

// ----------------------------------------------------------------------------
// Get switch index from character.
// ----------------------------------------------------------------------------
// Maps 'A'..'Z' to 0..25, else -1.
// ----------------------------------------------------------------------------
int getSwitchIndex(char switch_char) {
    int idx = switch_char - 'A';
    return idx;
}

// ----------------------------------------------------------------------------
// Check if a position is a spawn point.
// ----------------------------------------------------------------------------
// Returns true if x,y is a spawn.
// ----------------------------------------------------------------------------
bool isSpawnPoint(int r, int c) {
    return GRID[r][c] == 'S';
}

// ----------------------------------------------------------------------------
// Check if a position is a destination.
// ----------------------------------------------------------------------------
// Returns true if x,y is a destination.
// ----------------------------------------------------------------------------
bool isDestinationPoint(int r, int c) {
    return (GRID[r][c] == 'D');
}

// ----------------------------------------------------------------------------
// Toggle a safety tile.
// ----------------------------------------------------------------------------
// Returns true if toggled successfully.
// ----------------------------------------------------------------------------
bool toggleSafetyTile() {
    return true;
}


